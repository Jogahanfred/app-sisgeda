<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" 
      layout:decorate="~{layout}">

<th:block layout:fragment="pagetitle"> 
	<div th:replace="partials/title-meta :: title-meta('Catálogo de Unidades')"></div>
</th:block>

<head> 
	<link href="/assets/libs/sweetalert2/sweetalert2.min.css" rel="stylesheet" type="text/css" />
</head>

<body>
	<div layout:fragment="content">
		<div th:replace="partials/page-title :: page-title('Catálogo de Unidades','General')"></div>

		<div class="row">
			<div class="col-lg-12">
				<div class="card">
					<div class="card-header">
						<div class="d-flex align-items-center flex-wrap gap-2">
							<div class="flex-grow-1">
								<button class="btn btn-info add-btn" 
								        data-bs-toggle="modal" 
								        data-bs-target="#mdUnidad">
									 <i class="ri-add-fill me-1 align-bottom"></i> 
								 Agregar Unidad
								</button>
							</div>
							<div class="flex-shrink-0">
								<div class="hstack text-nowrap gap-2">
									<button class="btn btn-soft-danger shadow-none" id="remove-actions" onClick="eliminarMultiple()"><i class="ri-delete-bin-2-line"></i></button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="col-xxl-9">
				<div class="card" id="listadoUnidades">
					
					<div class="card-header">
						<div class="row g-2">
							<div class="col-md-6">
								<div class="search-box">
									<input type="text" class="form-control search" placeholder="Buscar por Unidad por nombre, Órgano Rector...">
									<i class="ri-search-line search-icon"></i>
								</div>
							</div> 
						</div>
					</div>
					
					<div class="card-body">  
							
							<div class="table-responsive table-card">
								
								<div id="loader" class="my-3 text-center">
									<div class="spinner-border text-primary avatar-sm m-2" role="status">
										<span class="visually-hidden">Cargando...</span>
									</div> 
								</div> 
								
								<div id="contentTable" style="display: none;">
									<table class="table align-middle mb-3" id="tblUnidad">
									
										<thead class="table-light text-muted">
											<tr>
												<th scope="col" style="width: 50px;">
													<div class="form-check">
														<input class="form-check-input" type="checkbox" id="checkAll" value="option">
													</div>
												</th>
												<th class="sort" data-sort="id_unidad" scope="col">Descripción</th>
												<th class="sort" data-sort="fl_bloqueado">Visión</th>
												<th class="sort" data-sort="nu_codigo" scope="col">Código</th> 
												<th class="sort" data-sort="nu_nivel" scope="col">Nivel</th>
												<th class="sort" data-sort="nu_codigo_rector" scope="col">Organo Rector</th>
												<th scope="col">Acción</th>
											</tr>
										</thead>
									
										<tbody class="list form-check-all">
											<tr>
												<th scope="row">
													<div class="form-check">
														<input class="form-check-input" type="checkbox" name="chk_child" value="option1">
													</div>
												</th>
												<td class="id_unidad" style="display:none;"><a href="javascript:void(0);" class="fw-medium link-primary">#VZ001</a></td>
												<td>
													<div class="d-flex align-items-center">
														<div class="flex-shrink-0 me-3">
															<div class="avatar-sm bg-light rounded p-1">
																<img src="assets/images/brands/dribbble.png" alt="" class="img-fluid d-block image_src">
															</div>
														</div>
														 <div class="flex-grow-1">
												            <h5 class="fs-14 mb-1"><a href="#" class="text-dark"><span class="tx_descripcion"></span></a></h5>
												            <p class="text-muted mb-0">Sigla : <span class="fw-medium no_nombre"></span></p>
												        </div> 
													</div>
												</td>
												<td class="fl_bloqueado">
													<p class="card-text placeholder-glow ">
														<span class="placeholder col-12 bg-info" style="border-radius: 1rem;"></span>
													</p>
												</td>
												<td class="nu_codigo">
													<p class="card-text placeholder-glow ">
														<span class="placeholder col-12 bg-info" style="border-radius: 1rem;"></span>
													</p>
												</td> 
												<td class="nu_nivel">
													<p class="card-text placeholder-glow ">
														<span class="placeholder col-12 bg-info" style="border-radius: 1rem;"></span>
													</p>
												</td>
												<td class="tx_descripcion_organo_rector">
													<p class="card-text placeholder-glow ">
														<span class="placeholder col-12 bg-info" style="border-radius: 1rem;"></span>
													</p>
												</td>
												<td>
													<ul class="list-inline hstack gap-2 mb-0">
													 
														<li class="list-inline-item" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-placement="top" title="Vista Previa">
															<a href="javascript:void(0);" class="view-item-btn"><i class="ri-eye-fill align-bottom text-muted"></i></a>
														</li>
														<li class="list-inline-item" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-placement="top" title="Editar">
															<a class="edit-item-btn" href="#mdUnidad" data-bs-toggle="modal"><i class="ri-pencil-fill align-bottom text-muted"></i></a>
														</li> 
													</ul>
												</td>
											</tr>
	
										</tbody>
										
									</table> 
								</div>
								
								<div class="noresult" style="display: none">
									<div class="text-center">
										<lord-icon src="https://cdn.lordicon.com/msoeawqm.json" trigger="loop"
											colors="primary:#121331,secondary:#08a88a" style="width:75px;height:75px">
										</lord-icon>
										<h5 class="mt-2">Disculpa! No se encontraron datos</h5>
										<p class="text-muted mb-0">
											La información consultada no ha sido encontrada en nuestra base de datos.
										</p>
									</div>
								</div>
							</div>
							
							<div class="d-flex justify-content-end mt-3">
								<div class="pagination-wrap hstack gap-2">
									<a class="page-item pagination-prev disabled" href="#">
										Anterior
									</a>
									<ul class="pagination listjs-pagination mb-0"></ul>
									<a class="page-item pagination-next" href="#">
										Siguiente
									</a>
								</div>
							</div>
							 
						
						<div class="modal fade" id="mdUnidad" tabindex="-1"  aria-hidden="true">
							<div class="modal-dialog modal-dialog-centered modal-lg">
								<div class="modal-content border-0">
									
									<div class="modal-header bg-soft-info p-3">
										<h5 class="modal-title" id="mdTitulo"></h5>
										<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="close-modal"></button>
									</div>
									
									<form id="frmUnidad" class="needs-validation tablelist-form" autocomplete="off" novalidate>
										<div class="modal-body">
											<input type="hidden" id="idUnidad-field" />
											<input type="hidden" id="txRutaLogo-field"/> 
											<input type="hidden" id="flEstado-field"/> 
											
											<div class="row g-3">
												<div class="col-md-4">
													<div class="text-center">
														<div class="position-relative d-inline-block">
															<div class="position-absolute bottom-0 end-0">
																<label for="unidad-logo-input" class="mb-0" data-bs-toggle="tooltip" data-bs-placement="right" title="Seleccionar Logo">
																	<div class="avatar-xs cursor-pointer">
																		<div class="avatar-title bg-light border rounded-circle text-muted">
																			<i class="ri-image-fill"></i>
																		</div>
																	</div>
																</label>
																<input class="form-control d-none" value="" id="unidad-logo-input" type="file" accept="image/png, image/gif, image/jpeg">
															</div>
															<div class="avatar-lg p-1">
																<div class="avatar-title bg-light rounded-circle">
																	<img src="assets/images/users/multi-user.jpg" id="unidadlogo-img" class="avatar-md rounded-circle object-cover" />
																</div>
															</div>
														</div>
														<h5 class="fs-13 mt-3">Logo Unidad</h5>
													</div>
												</div>
												<div class="col-md-8">
													<div>
														<label for="txDescripcion-field" class="form-label">Descripción</label>
														<input type="text" id="txDescripcion-field" class="form-control" placeholder="Ingrese Descripción" maxlength="70" required />
													    <div class="invalid-feedback">La descripción es requerida.</div>
													    <div class="valid-feedback">Descripción válida!</div>
													</div>
													<div class="row">														
														<div class="col-md-4 mt-3">
															<label for="noNombre-field" class="form-label">Nombre</label>
															<input type="text" id="noNombre-field" class="form-control" placeholder="Ingrese Nombre" maxlength="5" required />
														    <div class="invalid-feedback">El nombre es requerido.</div>
														    <div class="valid-feedback">Nombre válido!</div>
														</div>
														<div class="col-md-4 mt-3">
															<label for="nuCodigo-field" class="form-label">Código</label>
															<input type="text" id="nuCodigo-field" class="form-control" placeholder="Ingrese Código" required />
														    <div class="invalid-feedback">El código es requerido.</div>
														    <div class="valid-feedback">Código válido!</div>
														</div>
														<div class="col-md-4 mt-3"> 
															<label for="nuNivel-field" 
															       class="form-label">
															       Nivel
															 </label>
															<select class="form-control"  
															        data-choices
																	data-choices-search-false 
																	name="nuNivel-field"
																	id="nuNivel-field">
																<option value="">Nivel</option>
																<option value="Nivel 1">Nivel 1</option>
																<option value="Nivel 2">Nivel 2</option>
																<option value="Nivel 3">Nivel 3</option>
																<option value="Nivel 4">Nivel 4</option>
															</select> 
														</div> 
													</div>
												</div> 
												
												<div class="col-lg-8"> 
														<label for="nuCodigoRector-field" 
														       class="form-label">
														       Unidad Rector
														 </label>
														<select class="form-control"  
														        data-choices
																data-choices-search-false 
																name="nuCodigoRector-field"
																id="nuCodigoRector-field">
             		   										 	
																  <option value="">Unidad</option>
																  <option th:each="unidad : ${listaUnidades}"
                            											  th:value="${unidad.nuCodigo}"
												                          th:text="${unidad.noNombre + ' - ' + unidad.txDescripcion}">
												                  </option>
														</select> 
												</div>
												
												<div id="content-flBloqueado-field" class="col-lg-4" style="display: none;">
													<label for="flBloqueado-field" class="form-label">Permiso</label>
													<select class="form-control" 
													        data-choices 
													        data-choices-search-false
														    name="flBloqueado-field" 
														    id="flBloqueado-field">
														<option value="">Permiso</option>
														<option value="Permitido">Permitido</option>
														<option value="Bloqueado">Bloqueado</option>
													</select> 
												</div> 

												<div class="col-lg-12">
													<div>
														<label for="txUbicacion-field" class="form-label">Ubicación</label>
														<input type="text" id="txUbicacion-field" class="form-control" maxlength="100" placeholder="Ingrese Ubicación" />
														<div class="valid-feedback">Ubicación válida!</div>
													</div>
												</div> 
												<div class="col-lg-12"> 
													<div>
													    <label for="txInformacion-field" class="form-label">Información</label>
													    <textarea type="text" class="form-control" id="txInformacion-field" rows="2" placeholder="Ingrese Información" maxlength="200" style="resize: none;"></textarea> 													
														<div class="valid-feedback">Información válida!</div>
													</div> 
												</div> 
												
											</div>
										</div>
										<div class="modal-footer">
											<div class="hstack gap-2 justify-content-end">
												<button type="button" class="btn btn-light" data-bs-dismiss="modal">Cerrar</button>
												<button type="submit" class="btn btn-success" id="add-btn"></button> 
											</div>
										</div>
									</form>
								</div>
							</div>
						</div> 

					</div>
				</div>
				<!--end card-->
			</div>
			<!--end col-->
			<div class="col-xxl-3">
				<div class="card" id="company-view-detail">
					<div class="card-body text-center">
						<div class="position-relative d-inline-block">
							<div class="avatar-md">
								<div class="avatar-title bg-light rounded-circle shadow">
									<img src="assets/images/users/multi-user.jpg" alt="" class="avatar-sm rounded-circle object-cover">
								</div>
							</div>
						</div>
						<h5 class="mt-3 mb-1 placeholder-glow">
							<span class="placeholder placeholder-sm col-3 bg-info" style="border-radius: 1rem;"></span>
						</h5>
						<p class="text-muted placeholder-glow">
							<span class="placeholder col-4 bg-primary" style="border-radius: 1rem;"></span>
						</p>

						<ul class="list-inline mb-0">
							<li class="list-inline-item avatar-xs">
								<a href="javascript:void(0);" class="avatar-title bg-soft-success text-success fs-15 rounded">
									<i class="ri-global-line"></i>
								</a>
							</li>
							<li class="list-inline-item avatar-xs">
								<a href="javascript:void(0);" class="avatar-title bg-soft-danger text-danger fs-15 rounded">
									<i class="ri-mail-line"></i>
								</a>
							</li>
							<li class="list-inline-item avatar-xs">
								<a href="javascript:void(0);" class="avatar-title bg-soft-warning text-warning fs-15 rounded">
									<i class="ri-question-answer-line"></i>
								</a>
							</li>
						</ul>
					</div>
					<div class="card-body">
						<h6 class="text-muted text-uppercase fw-semibold mb-3">Información</h6>
						<p class="text-muted mb-4 placeholder-glow">
							<span class="placeholder col-7"></span>
					        <span class="placeholder col-8"></span>
					        <span class="placeholder col-6"></span>
					        <span class="placeholder col-5"></span>
						</p>
						<div class="table-responsive table-card">
							<table class="table table-borderless mb-0">
								<tbody>
									<tr>
										<td class="fw-medium" scope="row">Nivel</td>
										<td class="placeholder-glow">
											<span class="placeholder placeholder-sm col-12 bg-primary" style="border-radius: 1rem;"></span>
										</td>
									</tr>
									<tr>
										<td class="fw-medium" scope="row">Órgano Rector</td>
										<td class="placeholder-glow">							
											<span class="placeholder placeholder-sm col-12 bg-primary" style="border-radius: 1rem;"></span>
										</td>
									</tr>
									<tr>
										<td class="fw-medium" scope="row">Código</td>
										<td class="placeholder-glow">							
											<span class="placeholder placeholder-sm col-12 bg-primary" style="border-radius: 1rem;"></span>
										</td>
									</tr>
									<tr>
										<td class="fw-medium" scope="row">Ubicación</td>
										<td class="placeholder-glow">							
											<span class="placeholder placeholder-sm col-12 bg-primary" style="border-radius: 1rem;"></span>
										</td>
									</tr>
									<tr>
										<td class="fw-medium" scope="row">Permiso</td> 
										<td class="placeholder-glow">							
											<span class="placeholder placeholder-sm col-12 bg-primary" style="border-radius: 1rem;"></span>
										</td>
									</tr>
									
								</tbody>
							</table>
						</div>
					</div>
				</div>

			</div>
			<!--end col-->
		</div>
		<!--end row-->
	</div>
 

	<th:block layout:fragment="pagejs">

		<!-- List.js min js -->
		<script src="/assets/libs/list.js/list.min.js"></script>
		<script src="/assets/libs/list.pagination.js/list.pagination.min.js"></script>
		
		<!-- Unidad js -->
		<script src="/assets/js/pages/grl-unidad.init.js"></script>

		<!-- Sweet Alerts js -->
		<script src="/assets/libs/sweetalert2/sweetalert2.min.js"></script>
		
		<!-- Notifications js -->
		<script src="/assets/js/notifications.js"></script>
	</th:block>
</body>

</html>